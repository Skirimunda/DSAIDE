<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Andreas Handel" />

<meta name="date" content="2016-10-18" />

<title>DSAIDE Package Tutorial</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">DSAIDE Package Tutorial</h1>
<h4 class="author"><em>Andreas Handel</em></h4>
<h4 class="date"><em>2016-10-18</em></h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>DSAIDE stands for Dynamical Systems Approaches to Infectious Disease Epidemiology.</p>
<p>The idea behind this package is to give students and others interested in infectious diseases at the population level a tool that allows them to learn about patterns and features seen in infectious disease epidemiology using a dynamical systems approach.</p>
</div>
<div id="package-description" class="section level2">
<h2>Package description</h2>
<p>The package consists of several Shiny Apps that allow the simulation and exploration of different topics in infectious disease epidemiology.</p>
<p>There are currently 11 simulations/apps available. The topics covered by the apps are:</p>
<p>Each App is meant to be fully self-explanatory. The app contains a description of the model, a list of tasks students should try, and information for further details.</p>
<p>The underlying models are written mostly as deterministic, compartmental ordinary differential equations. Some models are written as stochastic equivalents. By wrapping the models around a graphical user interface, it allows exploration of models and infectious disease patterns without the need to write R code.</p>
<p>At the same time, the package is structured in a modular way that should allow those interested in the actual models and learning R coding to easily move from one stage to another.</p>
</div>
<div id="interacting-with-and-using-the-package" class="section level2">
<h2>Interacting with and using the package</h2>
<p>The following sections describe the main envisioned ways the content in this R package can be used and extended. The idea is that everyone starts at level 1, and then depending on their needs and interests, can decide to move on to the next level.</p>
<div id="level-1-interactive-use-through-the-shiny-user-interface" class="section level3">
<h3>Level 1: Interactive use through the Shiny user interface</h3>
<p>The interactive exploration of the models through the Shiny user interfacie is the main intended use of this package. The steps to get there are simple. Install the package (only needs to be done once):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">'DSAIDE'</span>)</code></pre></div>
<p>Then load the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;DSAIDE&quot;</span>)</code></pre></div>
<p>Finally, call the main menu for the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dsaidemenu</span>()</code></pre></div>
<p>This will bring up a simple graphical menu from which the user can select each App. After exploring an App, the user returns to the main menu and eventually exits the main menu. In this way, no coding experience is needed, the student can fully focus on learning the infectious disease dynamics related topics.</p>
<p>Each app contains the information needed to understand the underlying model, and has a list of (non exhaustive) tasks that a student can try to get a better understanding of the topic meant to be covered by the App.</p>
</div>
<div id="level-2-supplementing-simulations-with-custom-code" class="section level3">
<h3>Level 2: Supplementing simulations with custom code</h3>
<p>Each App is structured in such a way that the underlying model/simulation is a stand-alone function. This simulator function can be called directly, without going through the Shiny App. Consider as example the first App, called “ID Dynamics Intro”. The model is a simple SIR model. The function running this model is called <code>simulate_introduction.R</code>, the user can learn about the inputs and outputs of the function by looking at its documentation</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?simulate_introduction</code></pre></div>
<p>The help file explains that one can run the simulation by specifying initial number of susceptibles and infected, the duration for which the simulation should be run, and the rates of infection and recovery. Most models do not have inherent time units and are set by the user based on choices for parameters. It is important to ensure that all quantities that have time units (here, <em>tmax</em>, <em>g</em> and <em>b</em>) are expressed in the same time units, e.g. days or months (or the inverse of those units for rates).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw">simulate_introduction</span>(<span class="dt">S0 =</span> <span class="dv">1000</span>, <span class="dt">I0 =</span> <span class="dv">1</span>, <span class="dt">tmax =</span> <span class="dv">300</span>, <span class="dt">g =</span> <span class="fl">0.5</span>,  <span class="dt">b =</span> <span class="dv">1</span>/<span class="dv">1000</span>)</code></pre></div>
<p>Calling the simulation function produces time-series for the dynamics of each of the variables that are tracked. The Shiny app automatically produce plots of these time-series. Users can produce their own plots, e.g. such as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(result[,<span class="st">&quot;time&quot;</span>],result[,<span class="st">&quot;S&quot;</span>],<span class="dt">xlab=</span><span class="st">'Time'</span>,<span class="dt">ylab=</span><span class="st">'Number Susceptible'</span>,<span class="dt">type=</span><span class="st">'l'</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
<p>The more interesting use of these simulator functions outside of the Shiny App is that it allows additional exploration of the models. For instance it is possible to systematically loop over a parameter, record some quantity of interest for each run, and report the result at the end. The following is a simple example, where we loop over different values of the recovery rate and record the peak of the outbreak each time:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gvec =<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>,<span class="dv">2</span>,<span class="dt">by=</span><span class="fl">0.1</span>) <span class="co">#values of g which we went to run the simulation for</span>
peak =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(gvec)) <span class="co">#this will hold the peak values for each g</span>
for (n in <span class="dv">1</span>:<span class="kw">length</span>(gvec))
{
  result &lt;-<span class="st"> </span><span class="kw">simulate_introduction</span>(<span class="dt">S0 =</span> <span class="dv">1000</span>, <span class="dt">I0 =</span> <span class="dv">1</span>, <span class="dt">tmax =</span> <span class="dv">300</span>, <span class="dt">g =</span> gvec[n],  <span class="dt">b =</span> <span class="dv">1</span>/<span class="dv">1000</span>)
  peak[n] &lt;-<span class="st"> </span><span class="kw">max</span>(result[,<span class="st">&quot;I&quot;</span>])
}
<span class="kw">plot</span>(gvec,peak,<span class="dt">type=</span><span class="st">'p'</span>,<span class="dt">xlab=</span><span class="st">'Rate of recovery'</span>,<span class="dt">ylab=</span><span class="st">'Max number of infected'</span>)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAaVBMVEUAAAAAADoAAGYAOpAAZrY6AAA6ADo6AGY6Ojo6OpA6kNtmAABmADpmOpBmZgBmZmZmtttmtv+QOgCQOmaQkGaQ27aQ2/+2ZgC225C2/7a2///bkDrb2//b////tmb/25D//7b//9v///+e2pxgAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAJfUlEQVR4nO2djXbjJhCFtZuk3bXTbp22UbtqbEfv/5AVoD9si4sQQoDuPSebbDJCypdhGKEBFTVlVLH1BcQuAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAlKArsei19efG19SXBo86FwcxL9f3re7mBjVA/p8e5afq6ePzS4mRvWArseT/HxmF9M08qCD/FzSgzSNY5BwoYoxSNdomJdDGf3nRsyDgAgISO9iTx/lYbtriVKjIP3lvcmBrkcS0qQN8yJJrJgHadISRQGIiaKuOw9ioqjrNgZVxWnDq4lQt4kiE+kbMQ8CGoL0q/IdBmldd4A4zOtqAZXDlCsTRU13HkTpYpAGGgESKeKZPexGAyCVQl+Pz9tdTIzipD3Q3aT9smG+SEazAdXqLuzysigIFS2lJW0EkQOghk2x+F6sGH1ELRdAFvp8U/452Q2LrsXYCa0DqOqSgMlsIGtAcNK+i+P19BP8nAHhSfsuE6ink4GMY5DFpL2dB+U6itlM2vfzsaYYlIbcPcg4ad9Vok3aZAzIz6R9zoC8TNpnDchCNoliGpoJqInQNjOKVoliGpoN6GAByHaYT0Fzu1g1zANMD/PTieL8WYSt5ZAH0YOWGQrtOlHEI1S980Sx9DEZnTEgP7V3WQOyuMcQXiZmZifz7YwBdYtZTJJ8fnk30MwYULsUwSTZC0vJcYfDfL+mzpwotrmQaUYxCa2TBwnvqfbqQTa6Hr/+lC40uS5x54BEoJKajOe5AhJ38zgG+Tzv1lrLgwI3t54ICCgwoIn5oIjnh6LwoJgfscYAKOqH9OtM2s87b16AbCbtZ543J0B2k/Zzz5tXDPLvQRzF1m9uPbkA8lXEmYScJszETA+rO6YM+0LyRYt6MwbkZylCxoDoQciQMQgZchRbZGhuZQflL4HPu7UICIhFnEBrFVDttYiz1urrprTvEjyL8hfL1T4Pvhvf6OaSKMJ7DFcPinHibJXqDsciziinXlcaxZyKOPcEyKm5bAD52Ggy4xhktdGkY6KYxShms9HkrhNFizWr+04ULdas7nu1j8Wa1X17kM2a1X2v9rHRrlf7hD3v1nLuYgv3As4ZkPVrI857Xe1j8eKRsigOl+8fu1ztY/PoWcArpfe4DfMR5UkuHgRffiQZyvVibqt9YrppdX70bHp9lrqR/fyvdvOgqKY9ZgKyfAFbfyM7ec+fKyBbtWPc9OLEvQNa1lziMajrZisWUCU+ivl4oUY0AJBWeXBoaGUH80EWj559nndrOcQglQGGOu/WcgH0wjWrJkObrSl8nTeCWBU4SM87bwz5UMxBOoqMOuYgnSigcBsLJAoo4HnTjEEhz5voKMa9O2wMF76YJX9A7RZcq5+3Nd+sr7kDCrmgbsNo7Q7I6d0+btMdW473zoAWvj4rY0CwcMPveQfjVAAFPm9vnVwMCnTe1jylUcxmu2R/5705LDgoB0Abbpe8QVdzCdKbTdpvEayjnlF8fFDsgELOST88SPazYLHIIQbh7ZJ9nvfuqPFHACU23aE8J2RXSyQPenSw1tW6L6Y+Q4Mpw5UArbtuvgfUu9Nt37vri8jAaDjjoiy19nKo9so1UOLfqc/QYNJwHUDrL2a5iUWpAQq1HCpOQLJ41axgy6GijEHdTNnnnxG8JTPKUewsV2BUfPnRpKEawxcuC09GDoAkIR93rPPO6slyncRGMy+L4o+3pQvGZp/Vl+XqgJrwItdqLLsXm3tWf5brA/pNuY5pFPOmFAEFVZKAvCxFmH1Wb5brAyqfPqrn+vISYhxLEZCYtD+LzU1CDGNpAjrVl19/yo/VlSIgcScqNv4PAighDTxF3Ut5CNPFEtI4k34WI1mIQSwlJXP7vZUICEgB6p5WhEoUE1LrQdfjwr3as9VomF84V5apxjGoZPe6lx6kq1BTiunodhS7vNCLNGmAxGBGPrpGgMRritnBbtUDKg1vcPal8e5nan5u+pSjm2bTpmljQ1OTMtPrh2lzi5paQObnhZ4kNm/qN3ACS2TFi8kfHWYyNDT5+dY0UHXwzC3qCphJq0f73XIr86qi83Ad+mEGQ1OTaqK0XahjbvFGAe/FtIusK9P1nYtD/9vqhxkMzU1Ka+U1xhZvFRKQtj1c+a0wPuceABl3lRv/BDXZ1cqjFjUFBKT+fu1f8XoUE3OGDeL769cOMxniJlt6qEVNWwFqvzX9V5wPCDV5HsfoGAE98GzDQyaHLmZucqhpirWLPYiNhoHZLkjX94AmmqyG6BRrkNZGV3WRNl0MDco3JCeaHO+0Huswr+dn8vpsgjRK60aj2HSTl5fxt+cnioFUqQxfrZspzbd+8vdWlpXxxmBkON1k+zb0L+82LWripD0QAQEREBABAREQEAEBERAQAQEREBABAREQEAEBERAQAQEREBABAREQEAEBERAQAQEREBABAREQEAEBERAQAQEREFDQ6g71gFyrLjhPPp6vlu5E40dBAcmCE21Dy+kNUv3sLbtc4QFpe6KaAMVR9R8ekHrdtqpUES99E5sZ3FTBN/8RP5GFP9fXv8QXvUnVFtN3ZrJoSlaJSwNp/rsscfGzcGAjDxK1TuKtttJPxBd9hZPogWI/tc6DVO1qb6IOOnRmbV3Q00dnIM1FydDnmx8PDA9IFMOJHQzkX19gUNHmPK6Cb1xiAHSoB5MuMvVmotKw+aZuIHeR8PE2sHqTUazfSa9QgFQxXFudqj41/w6ATvVg0tWwambNT3sDdVjjoL42SAjtQZeX1o2Kr/+0HnQuRuDUb958WwfUmXR+0ZsJFk0P6w3UYY0rGcofZyl4F5PlyvL367qYVk5p8qB6qILuzRoW/47bUIddX/9+9bSKO3wMKkWJqQg456KLQaex0V0MOo3G/LsY1HznhwxDvcFJ/vibry1IwgMS44xynuKgfmH5kvay9YH7UUxWfXcm4gvRUGcmEobnkUF7WOUtC98gDxIXL+twxS9cdnnQUBbdJjQaoMFEz4PqPjNvDVpzX2NYtjerl+++NvnJFFDl7UYuS0CXF3+7RGUJyKcICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgAgIiICACAiIgIAICIiAgP4HunPdmWnVGcAAAAAASUVORK5CYII=" alt /><!-- --></p>
<p>Thus, the user can add their own custom code to the existing simulator functions and with a few lines of extra code analyze and explore many more questions and scenarios than those accessible through the Shiny App interface. This gives the user a lot more flexibility using these simulations, but requires being able to write some R code to interface with the supplied simulator functions.</p>
</div>
<div id="level-3-modifying-simulations" class="section level3">
<h3>Level 3: Modifying simulations</h3>
<p>Finally, there is an option for the user to access and modify the underlying simulator functions directly. To facilitate this, all simulator functions are in a subdirectory called <em>simulatorfunctions</em> inside the DSAIDE package folder. You might have to search your computer to see where R installed the package.</p>
<p>I suggest that you copy the whole folder to some new directory and then modify the function you are interested in. All simulator functions are (hopefully) well documented. So as long as you are familiar with R coding, you should have no problem modifying the function to your needs. After editing the simulator function to suit your needs, you will likely also need to write additional code to interact with your modified function as described in <em>Level 2</em>.</p>
<p>The following provides a simple example of this process. Let’s assume for simplicity that you want to modify the simple SIR model encoded in simulate_introduction.R. You find the file, make a copy - let’s call it mysimulator.R and edit. Say you want to include waning immunity with recovered returning to the susceptible class at rate <em>w</em>.</p>
<p>You will need to modify the following lines in your code:</p>
<p>old:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simulate_introduction &lt;-<span class="st"> </span>function(<span class="dt">S0 =</span> <span class="dv">1000</span>, <span class="dt">I0 =</span> <span class="dv">1</span>, <span class="dt">tmax =</span> <span class="dv">300</span>, <span class="dt">g =</span> <span class="fl">0.5</span>, <span class="dt">b =</span> <span class="dv">1</span>/<span class="dv">1000</span>)</code></pre></div>
<p>new:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mysimulator &lt;-<span class="st"> </span>function(<span class="dt">S0 =</span> <span class="dv">1000</span>, <span class="dt">I0 =</span> <span class="dv">1</span>, <span class="dt">tmax =</span> <span class="dv">300</span>, <span class="dt">g =</span> <span class="fl">0.5</span>, <span class="dt">b =</span> <span class="dv">1</span>/<span class="dv">1000</span>, <span class="dt">w =</span> <span class="dv">0</span>)</code></pre></div>
<p>old:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pars =<span class="st"> </span><span class="kw">c</span>(<span class="dt">b =</span> b, <span class="dt">g =</span> g);</code></pre></div>
<p>new:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pars =<span class="st"> </span><span class="kw">c</span>(<span class="dt">b =</span> b, <span class="dt">g =</span> g, <span class="dt">w =</span> w);</code></pre></div>
<p>old:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dS =<span class="st">  </span>-<span class="st"> </span>b *<span class="st"> </span>S *<span class="st"> </span>I; <span class="co">#susceptibles</span>
dI =<span class="st"> </span>b *<span class="st"> </span>S *<span class="st"> </span>I -<span class="st"> </span>g *<span class="st"> </span>I; <span class="co">#infected/infectious</span>
dR =<span class="st"> </span>g *<span class="st"> </span>I; <span class="co">#recovered</span></code></pre></div>
<p>new:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dS =<span class="st">  </span>-<span class="st"> </span>b *<span class="st"> </span>S *<span class="st"> </span>I +<span class="st"> </span>w *<span class="st"> </span>R; <span class="co">#susceptibles</span>
dI =<span class="st"> </span>b *<span class="st"> </span>S *<span class="st"> </span>I -<span class="st"> </span>g *<span class="st"> </span>I; <span class="co">#infected/infectious</span>
dR =<span class="st"> </span>g *<span class="st"> </span>I -<span class="st">  </span>w *<span class="st"> </span>R; <span class="co">#recovered</span></code></pre></div>
<p>If you now wanted to explore how different rates of waning immunity impact the maximum peak size over all outbreaks, you can for instance run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wvec =<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">2</span>,<span class="dt">by=</span><span class="fl">0.1</span>) <span class="co">#values of w which we went to run the simulation for</span>
peak =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(wvec)) <span class="co">#this will hold the peak values for each w</span>
for (n in <span class="dv">1</span>:<span class="kw">length</span>(wvec))
{
  result &lt;-<span class="st"> </span><span class="kw">mysimulator</span>(<span class="dt">S0 =</span> <span class="dv">1000</span>, <span class="dt">I0 =</span> <span class="dv">1</span>, <span class="dt">tmax =</span> <span class="dv">300</span>, <span class="dt">g =</span> <span class="fl">0.5</span>,  <span class="dt">b =</span> <span class="dv">1</span>/<span class="dv">1000</span>, <span class="dt">w =</span> wvec[n])
  peak[n] &lt;-<span class="st"> </span><span class="kw">max</span>(result[,<span class="st">&quot;I&quot;</span>])
}
<span class="kw">plot</span>(wvec,peak,<span class="dt">type=</span><span class="st">'p'</span>)</code></pre></div>
</div>
<div id="level-4-developing-a-new-shiny-app" class="section level3">
<h3>Level 4: Developing a new Shiny app</h3>
<p>I would love to add further Shiny apps to the package. I have tried to make it (hopefully) easy to develop further Shiny Apps. There is some information in the package to help with development in a sub-folder called <em>docsfordevelopers</em>. Essentially, each app consists of a simulator function and a shiny App function which calls the simulator function, together with documentation for the App. Developing a new App then consists of writing at minimum 2 R functions (<em>simulate_NNN.R</em> and the corresponding <em>app.R</em>) and filling the provided Rmd template for the documentation, then running a few functions to process everything. See the information in the <em>docsfordevelopers</em> folder for more details.</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
